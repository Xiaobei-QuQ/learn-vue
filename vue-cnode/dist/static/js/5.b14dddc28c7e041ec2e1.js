webpackJsonp([5],{Y6A4:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),o=a.n(n),r=a("7t+N"),s=a.n(r),i=a("Cz8s"),c=a("NYxO"),l={data:function(){return{topic:{tab:"share",title:"",content:""},err:"",authorTxt:'<br/><br/><a class="from" href="#">I‘m webapp-cnodejs-vue</a>'}},computed:o()({},Object(c.b)({userInfo:"getUserInfo"})),methods:{addTopic:function(){var t=this;console.log(this.userInfo);var e=s.a.trim(this.topic.title),a=s.a.trim(this.topic.content);if(!e||e.length<10)return this.err="title",!1;if(!a)return this.err="content",!1;var n=o()({},this.topic,{content:this.topic.content+this.authorTxt,accesstoken:this.userInfo.token});s.a.ajax({type:"POST",url:"https://cnodejs.org/api/v1/topics",data:n,dataType:"json",success:function(e){e.success&&t.$router.push({name:"list"})},error:function(e){var a=JSON.parse(e.responseText);return t.$alert(a.error_msg),!1}})}},components:{nvHead:i.a}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nv-head",{attrs:{"page-type":"主题","show-menu":!1,"fix-head":!0}}),t._v(" "),a("div",{staticClass:"add-container"},[a("div",{staticClass:"line"},[t._v("选择分类：\n            "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.topic.tab,expression:"topic.tab"}],staticClass:"add-tab",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.topic,"tab",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"share"}},[t._v("分享")]),t._v(" "),a("option",{attrs:{value:"ask"}},[t._v("问答")]),t._v(" "),a("option",{attrs:{value:"job"}},[t._v("招聘")])]),t._v(" "),a("a",{staticClass:"add-btn",on:{click:t.addTopic}},[t._v("发布")])]),t._v(" "),a("div",{staticClass:"line"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.topic.title,expression:"topic.title"}],staticClass:"add-title",class:{err:"title"==t.err},attrs:{type:"text",placeholder:"标题，字数10字以上","max-length":"100"},domProps:{value:t.topic.title},on:{input:function(e){e.target.composing||t.$set(t.topic,"title",e.target.value)}}})]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.topic.content,expression:"topic.content"}],staticClass:"add-content",class:{err:"content"==t.err},attrs:{rows:"35",placeholder:"回复支持Markdown语法,请注意标记代码"},domProps:{value:t.topic.content},on:{input:function(e){e.target.composing||t.$set(t.topic,"content",e.target.value)}}})])],1)},staticRenderFns:[]};var u=a("VU/8")(l,p,!1,function(t){a("wj7I")},null,null);e.default=u.exports},wj7I:function(t,e){}});
//# sourceMappingURL=5.b14dddc28c7e041ec2e1.js.map