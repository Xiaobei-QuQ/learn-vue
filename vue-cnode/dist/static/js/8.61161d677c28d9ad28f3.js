webpackJsonp([8],{J4Wv:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Dd8w"),n=a.n(s),i=a("7t+N"),c=a.n(i),o=a("wxfA"),r=a("Cz8s"),l=a("NYxO"),d={data:function(){return{showMenu:!1,selectItem:2,message:{},noData:!1,currentData:[],no_read_len:0}},computed:n()({},Object(l.b)({userInfo:"getUserInfo"})),mounted:function(){var t=this;c.a.get("https://cnodejs.org/api/v1/messages?accesstoken="+this.userInfo.token,function(e){e&&e.data?(t.message=e.data,t.no_read_len=e.data.hasnot_read_messages.length,e.data.hasnot_read_messages.length>0?t.currentData=e.data.hasnot_read_messages:(t.currentData=e.data.has_read_messages,t.selectItem=2),t.noData=0===t.currentData.length):t.noData=!0})},methods:{changeItem:function(t){this.selectItem=t,this.currentData=1===t?this.message.hasnot_read_messages:this.message.has_read_messages,this.noData=0===this.currentData.length},markall:function(){c.a.post("https://cnodejs.org/api/v1/message/mark_all",{accesstoken:this.userInfo.token},function(t){t&&t.success&&window.location.reload()})},getLastTimeStr:function(t,e){return o.getLastTimeStr(t,e)}},components:{nvHead:r.a}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"100%"}},[a("nv-head",{attrs:{"page-type":"消息","fix-head":!0,"show-menu":t.showMenu,"message-count":t.no_read_len,"need-add":!1,"need-res":!0}}),t._v(" "),a("div",{staticClass:"page"},[a("ul",{staticClass:"tabs"},[a("li",{staticClass:"item br",class:{selected:2===t.selectItem},on:{click:function(e){t.changeItem(2)}}},[t._v("已读消息")]),t._v(" "),a("li",{staticClass:"item",class:{selected:1===t.selectItem},on:{click:function(e){t.changeItem(1)}}},[t._v("\n                未读消息\n                "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.no_read_len>0,expression:"no_read_len > 0"}],staticClass:"iconfont read",on:{click:t.markall}},[t._v("")])])]),t._v(" "),t._l(t.currentData,function(e,s){return a("div",{staticClass:"message markdown-body"},[a("section",{staticClass:"user"},[a("img",{staticClass:"head",attrs:{src:e.author.avatar_url}}),t._v(" "),a("div",{staticClass:"info"},[a("span",{staticClass:"cl"},[a("span",{staticClass:"name"},[t._v(t._s(e.author.loginname))]),t._v(" "),"at"===e.type?a("span",{staticClass:"name"},[t._v("在回复中@了您")]):t._e(),t._v(" "),"reply"===e.type?a("span",{staticClass:"name"},[t._v("回复了您的话题")]):t._e()]),t._v(" "),a("span",{staticClass:"cr"},[a("span",{staticClass:"name",domProps:{textContent:t._s(t.getLastTimeStr(e.reply.create_at,!0))}})])])]),t._v(" "),a("div",{staticClass:"reply_content",domProps:{innerHTML:t._s(e.reply.content)}}),t._v(" "),a("router-link",{attrs:{to:{name:"topic",params:{id:e.topic.id}}}},[a("div",{staticClass:"topic-title"},[t._v("\n                    话题："+t._s(e.topic.title)+"\n                ")])])],1)}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.noData,expression:"noData"}],staticClass:"no-data"},[a("i",{staticClass:"iconfont icon-empty"},[t._v("")]),t._v("\n            暂无数据!\n        ")])],2)],1)},staticRenderFns:[]},m=a("VU/8")(d,_,!1,null,null,null);e.default=m.exports}});
//# sourceMappingURL=8.61161d677c28d9ad28f3.js.map